{"ast":null,"code":"import _classCallCheck from \"/Users/admin/Desktop/react-native-app/ascent-web/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/admin/Desktop/react-native-app/ascent-web/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/admin/Desktop/react-native-app/ascent-web/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/admin/Desktop/react-native-app/ascent-web/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/admin/Desktop/react-native-app/ascent-web/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/admin/Desktop/react-native-app/ascent-web/client/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/admin/Desktop/react-native-app/ascent-web/client/src/App.js\";\nimport React, { Component } from 'react';\nimport './App.css';\nimport { Route, Switch, Redirect } from 'react-router-dom';\nimport { BrowserRouter as Router } from 'react-router-dom';\nimport LandingPage from './components/LandingPage';\nimport Login from './components/Login/Login';\nimport Dashboard from './components/Dashboard/Dashboard';\nimport ClientPage from './components/ClientPage/ClientPage';\nimport LogAWorkout from './components/LogAWorkout/LogAWorkout';\nimport SyncPage from './components/SyncPage/SyncPage';\nimport SyncRedirect from './components/SyncRedirect/SyncRedirect';\nimport SyncingPage from './components/SyncingPage/SyncingPage';\nimport firebase from 'firebase';\nimport { firestore } from 'firebase';\nimport moment from 'moment';\nvar config = {\n  apiKey: \"AIzaSyDQSDfPrKEo3mwSOzTQjK2KxaZlIFEey6E\",\n  authDomain: \"ascent-2982c.firebaseapp.com\",\n  databaseURL: \"https://ascent-2982c.firebaseio.com\",\n  projectId: \"ascent-2982c\",\n  storageBucket: \"ascent-2982c.appspot.com\",\n  messagingSenderId: \"101065531447\"\n};\n\nvar App =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(App, _Component);\n\n  function App(props) {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(App).call(this, props));\n    _this.state = {\n      clients: [],\n      first: '',\n      last: '',\n      picked: '',\n      stress_scores: []\n    };\n\n    _this.getStressScores = function () {\n      firestore().collection('Users').doc(_this.state.picked).collection('Cardio Workouts').orderBy('start_date_local', 'asc').get().then(function (snapshot) {\n        var stressArray = [];\n        snapshot.forEach(function (doc) {\n          stressArray.push({\n            date: doc.data().start_date_local.slice(0, 10),\n            score: doc.data().stress_score\n          });\n        });\n        var fullStressArray = [];\n        var today = new Date();\n\n        for (var i = 0; i < stressArray.length; i++) {\n          fullStressArray.push(stressArray[i]);\n\n          if (i < stressArray.length - 1) {\n            var date1 = new Date(stressArray[i].date);\n            var date2 = new Date(stressArray[i + 1].date);\n            var dayDifference = (date2 - date1) / 86400000;\n\n            if (dayDifference > 1) {\n              for (var x = 1; x < dayDifference; x++) {\n                if (x === 1) {\n                  fullStressArray.push({\n                    date: new Date(date1.setDate(date1.getDate() + 2)),\n                    score: 0\n                  });\n                } else {\n                  fullStressArray.push({\n                    date: new Date(date1.setDate(date1.getDate() + 1)),\n                    score: 0\n                  });\n                }\n              }\n            }\n          } else {\n            // adds zeros to the end of the array to reach today's date if needed.\n            var lastWorkoutDate = new Date(stressArray[stressArray.length - 1].date.slice(0, 10));\n            var daysSinceLastWorkout = Math.floor((today - lastWorkoutDate) / (1000 * 60 * 60 * 24));\n\n            if (daysSinceLastWorkout > 0) {\n              for (var _i = 0; _i < daysSinceLastWorkout; _i++) {\n                if (_i === 0) {\n                  fullStressArray.push({\n                    date: new Date(lastWorkoutDate.setDate(lastWorkoutDate.getDate() + 2)),\n                    score: 0\n                  });\n                } else {\n                  fullStressArray.push({\n                    date: new Date(lastWorkoutDate.setDate(lastWorkoutDate.getDate() + 1)),\n                    score: 0\n                  });\n                }\n              }\n            }\n          }\n        }\n\n        _this.setState({\n          stress_scores: fullStressArray\n        }, function () {\n          _this.getFitnessScores();\n        });\n      });\n    };\n\n    _this.getFitnessScores = function () {\n      var stressArray = _this.state.stress_scores;\n      var fitnessArray = [];\n      var fitness = 0;\n      var multiplier = 2 / 43;\n\n      for (var i = 0; i < stressArray.length - 1; i++) {\n        fitness += (stressArray[i].score - fitness) * multiplier;\n        fitnessArray.push(fitness);\n      }\n\n      console.log(fitnessArray);\n    };\n\n    _this.handleClientPick = _this.handleClientPick.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.upLoadClients = _this.upLoadClients.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.redirectClient = _this.redirectClient.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"handleClientPick\",\n    value: function handleClientPick(client) {\n      var _this2 = this;\n\n      this.setState({\n        picked: client.id,\n        first: client.first,\n        last: client.last\n      }, function () {\n        _this2.getStressScores();\n      });\n    }\n  }, {\n    key: \"upLoadClients\",\n    value: function upLoadClients(clients) {\n      this.setState({\n        clients: clients\n      });\n    }\n  }, {\n    key: \"redirectClient\",\n    value: function redirectClient(client) {\n      var _this3 = this;\n\n      this.setState({\n        picked: client\n      }, function () {\n        console.log(_this3.state);\n      });\n    }\n  }, {\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      if (!firebase.apps.length) {\n        firebase.initializeApp(config);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154\n        },\n        __self: this\n      }, React.createElement(Router, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      }, React.createElement(Switch, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }, React.createElement(Route, {\n        exact: true,\n        path: \"/\",\n        render: function render() {\n          return React.createElement(LandingPage, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 158\n            },\n            __self: this\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        },\n        __self: this\n      }), React.createElement(Route, {\n        exact: true,\n        path: \"/Login\",\n        render: function render(history) {\n          return firebase.auth().onAuthStateChanged(function (user) {\n            if (user === null) {\n              return React.createElement(Login, {\n                history: history,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 163\n                },\n                __self: this\n              });\n            } else {\n              console.log(history);\n              history.history.push('/Dashboard');\n            }\n\n            return null;\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160\n        },\n        __self: this\n      }), firebase.auth().onAuthStateChanged(function (user) {\n        if (user) {\n          return null;\n        } else {\n          return React.createElement(Redirect, {\n            to: \"/login\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 181\n            },\n            __self: this\n          });\n        }\n      }), React.createElement(Route, {\n        exact: true,\n        path: \"/Dashboard\",\n        render: function render() {\n          return React.createElement(Dashboard, {\n            all: _this4.state,\n            handleClientPick: _this4.handleClientPick,\n            uploadClients: _this4.upLoadClients,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 188\n            },\n            __self: this\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186\n        },\n        __self: this\n      }), React.createElement(Route, {\n        exact: true,\n        path: \"/ClientPage\",\n        render: function render() {\n          return React.createElement(ClientPage, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 197\n            },\n            __self: this\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196\n        },\n        __self: this\n      }), React.createElement(Route, {\n        exact: true,\n        path: \"/LogAWorkout\",\n        render: function render() {\n          return React.createElement(LogAWorkout, {\n            all: _this4.state,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 201\n            },\n            __self: this\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200\n        },\n        __self: this\n      }), React.createElement(Route, {\n        exact: true,\n        path: \"/Sync\",\n        render: function render(history) {\n          return React.createElement(SyncPage, {\n            history: history,\n            all: _this4.state,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 206\n            },\n            __self: this\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204\n        },\n        __self: this\n      }), React.createElement(Route, {\n        path: \"/redirect_page\",\n        render: function render(history) {\n          return React.createElement(SyncRedirect, {\n            redirectClient: _this4.redirectClient,\n            history: history,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 212\n            },\n            __self: this\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 211\n        },\n        __self: this\n      }), React.createElement(Route, {\n        exact: true,\n        path: \"/syncingPage\",\n        render: function render(history) {\n          return React.createElement(SyncingPage, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 218\n            },\n            __self: this\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217\n        },\n        __self: this\n      }), React.createElement(Route, {\n        path: \"*\",\n        render: function render() {\n          return React.createElement(Redirect, {\n            to: \"/\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 222\n            },\n            __self: this\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 221\n        },\n        __self: this\n      })))));\n    }\n  }]);\n\n  return App;\n}(Component);\n\nexport default App;","map":{"version":3,"sources":["/Users/admin/Desktop/react-native-app/ascent-web/client/src/App.js"],"names":["React","Component","Route","Switch","Redirect","BrowserRouter","Router","LandingPage","Login","Dashboard","ClientPage","LogAWorkout","SyncPage","SyncRedirect","SyncingPage","firebase","firestore","moment","config","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","App","props","state","clients","first","last","picked","stress_scores","getStressScores","collection","doc","orderBy","get","then","snapshot","stressArray","forEach","push","date","data","start_date_local","slice","score","stress_score","fullStressArray","today","Date","i","length","date1","date2","dayDifference","x","setDate","getDate","lastWorkoutDate","daysSinceLastWorkout","Math","floor","setState","getFitnessScores","fitnessArray","fitness","multiplier","console","log","handleClientPick","bind","upLoadClients","redirectClient","client","id","apps","initializeApp","history","auth","onAuthStateChanged","user"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport './App.css';\nimport { Route, Switch, Redirect } from 'react-router-dom';\nimport { BrowserRouter as Router } from 'react-router-dom';\n\n\n\nimport LandingPage from './components/LandingPage';\nimport Login from './components/Login/Login';\nimport Dashboard from './components/Dashboard/Dashboard';\nimport ClientPage from './components/ClientPage/ClientPage';\nimport LogAWorkout from './components/LogAWorkout/LogAWorkout';\nimport SyncPage from './components/SyncPage/SyncPage';\nimport SyncRedirect from './components/SyncRedirect/SyncRedirect';\nimport SyncingPage from './components/SyncingPage/SyncingPage';\n\nimport firebase from 'firebase';\nimport { firestore } from 'firebase';\nimport moment from 'moment';\n\n\nconst config = {\n  apiKey: \"AIzaSyDQSDfPrKEo3mwSOzTQjK2KxaZlIFEey6E\",\n  authDomain: \"ascent-2982c.firebaseapp.com\",\n  databaseURL: \"https://ascent-2982c.firebaseio.com\",\n  projectId: \"ascent-2982c\",\n  storageBucket: \"ascent-2982c.appspot.com\",\n  messagingSenderId: \"101065531447\"\n};\n\nclass App extends Component {\n  constructor(props) {\n    super(props)\n    this.handleClientPick = this.handleClientPick.bind(this);\n    this.upLoadClients = this.upLoadClients.bind(this);\n    this.redirectClient = this.redirectClient.bind(this);\n  }\n\n\n  state = {\n    clients: [],\n    first: '',\n    last: '',\n    picked: '',\n    stress_scores: []\n\n  }\n\n  handleClientPick(client) {\n    this.setState({ picked: client.id, first: client.first, last: client.last },()=>{\n      this.getStressScores()\n    })\n  }\n\n  getStressScores = () => {\n    firestore().collection('Users').doc(this.state.picked).collection('Cardio Workouts').orderBy('start_date_local', 'asc').get()\n      .then(snapshot => {\n        var stressArray = [];\n        snapshot.forEach(doc => {\n          stressArray.push({ date: doc.data().start_date_local.slice(0,10), score: doc.data().stress_score })\n        });\n        var fullStressArray = [];\n        var today = new Date()\n\n        for (let i = 0; i < stressArray.length; i++) {\n          fullStressArray.push(stressArray[i])\n\n          if (i < stressArray.length - 1) {\n\n            var date1 = new Date(stressArray[i].date);\n            var date2 = new Date(stressArray[i + 1].date);\n           \n\n            var dayDifference = (date2 - date1)/86400000;\n           \n            if (dayDifference > 1) {\n              for (let x = 1; x < dayDifference; x++) {\n                if (x ===1 ){\n               fullStressArray.push({date: new Date(date1.setDate(date1.getDate()+2)),score:0} )\n\n                }\n                else{\n               fullStressArray.push({date: new Date(date1.setDate(date1.getDate()+1)),score:0} )\n              }\n            }\n            }\n          }\n\n\n          else{\n          // adds zeros to the end of the array to reach today's date if needed.\n          let lastWorkoutDate = new Date(stressArray[stressArray.length - 1].date.slice(0,10));\n          let daysSinceLastWorkout = Math.floor((today - lastWorkoutDate) / (1000 * 60 * 60 * 24));\n          if (daysSinceLastWorkout > 0) {\n            for (let i = 0; i < daysSinceLastWorkout; i++) {\n              if (i ===0 ){\n                fullStressArray.push({date: new Date(lastWorkoutDate.setDate(lastWorkoutDate.getDate()+2)),score:0} )\n \n                 }\n                 else{\n                fullStressArray.push({date: new Date(lastWorkoutDate.setDate(lastWorkoutDate.getDate()+1)),score:0} )\n               }\n              }\n            }\n          }\n\n        }\n\n        this.setState({stress_scores: fullStressArray},()=>{\n          this.getFitnessScores()\n        })\n      })\n\n  }\n\n  getFitnessScores = ()=>{\n    var stressArray = this.state.stress_scores\n    var fitnessArray= [];\n    var fitness = 0;\n    let multiplier = (2 / 43);\n    for (let i = 0; i < stressArray.length - 1; i++) {\n    fitness += (stressArray[i].score - fitness) * multiplier;\n      fitnessArray.push(fitness);\n    }\n    console.log(fitnessArray)\n\n\n\n  }\n\n\n\n  upLoadClients(clients) {\n    this.setState({ clients: clients })\n  }\n\n  redirectClient(client) {\n    this.setState({ picked: client }, () => {\n      console.log(this.state)\n    })\n  }\n\n\n\n  componentWillMount() {\n    if (!firebase.apps.length) {\n      firebase.initializeApp(config);\n    }\n  }\n\n\n  render() {\n    return (\n      <div>\n        <Router>\n          <div>\n            <Switch>\n              <Route exact path=\"/\" render={() => <LandingPage />} />\n\n              <Route exact path='/Login' render={(history) => {\n                return firebase.auth().onAuthStateChanged(function (user) {\n                  if (user === null) {\n                    return <Login history={history} />\n                  }\n                  else {\n                    console.log(history)\n                    history.history.push('/Dashboard')\n\n                  }\n                  return null\n                })\n\n\n              }} />\n\n              {firebase.auth().onAuthStateChanged(function (user) {\n                if (user) {\n                  return null\n                }\n                else {\n                  return <Redirect to='/login' />\n                }\n              })}\n\n\n              <Route exact path='/Dashboard' render={() => {\n                return (\n                  <Dashboard\n                    all={this.state}\n                    handleClientPick={this.handleClientPick}\n                    uploadClients={this.upLoadClients}\n\n                  />)\n              }} />\n\n              <Route exact path='/ClientPage' render={() =>\n                <ClientPage />\n              } />\n\n              <Route exact path='/LogAWorkout' render={() => {\n                return (<LogAWorkout all={this.state} />)\n              }} />\n\n              <Route exact path='/Sync' render={(history) => {\n                return (\n                  <SyncPage\n                    history={history}\n                    all={this.state} />)\n              }} />\n\n              <Route path='/redirect_page' render={(history) => {\n                return <SyncRedirect\n                  redirectClient={this.redirectClient}\n                  history={history} />\n              }} />\n\n              <Route exact path='/syncingPage' render={(history) => {\n                return (<SyncingPage />)\n              }} />\n\n              <Route path='*' render={() => {\n                return (<Redirect to='/' />)\n              }} />\n\n            </Switch>\n\n          </div>\n        </Router>\n\n\n      </div>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}